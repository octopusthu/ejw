<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>2.1.5.RELEASE</version>
    <relativePath/>
  </parent>
  <groupId>com.octopusthu.ejw</groupId>
  <artifactId>ejw-parent</artifactId>
  <version>1.2.0-SNAPSHOT</version>
  <packaging>pom</packaging>

  <properties>

    <!-- Dependencies versions -->
    <ejw.version>${project.version}</ejw.version>
    <spring-cloud-dependencies.version>Greenwich.SR1</spring-cloud-dependencies.version>
    <spring-boot-admin.version>2.1.5</spring-boot-admin.version>

    <!-- GitHub plugin properties -->
    <github.global.server>github</github.global.server>
    <github.repositoryName>ejw</github.repositoryName>
    <github.repositoryOwner>octopusthu</github.repositoryOwner>
    <github.branch>maven</github.branch>
    <github.site-maven-plugin.version>0.12</github.site-maven-plugin.version>

  </properties>

  <dependencyManagement>
    <dependencies>

      <!-- ejw dependencies -->
      <dependency>
        <groupId>com.octopusthu.ejw</groupId>
        <artifactId>ejw-core</artifactId>
        <version>${ejw.version}</version>
      </dependency>

      <!-- spring-cloud dependencies -->
      <dependency>
        <groupId>org.springframework.cloud</groupId>
        <artifactId>spring-cloud-dependencies</artifactId>
        <version>${spring-cloud-dependencies.version}</version>
        <type>pom</type>
        <scope>import</scope>
      </dependency>

      <!-- spring-boot-admin dependencies -->
      <dependency>
        <groupId>de.codecentric</groupId>
        <artifactId>spring-boot-admin-starter-server</artifactId>
        <version>${spring-boot-admin.version}</version>
      </dependency>
      <dependency>
        <groupId>de.codecentric</groupId>
        <artifactId>spring-boot-admin-starter-client</artifactId>
        <version>${spring-boot-admin.version}</version>
      </dependency>

      <!-- other dependencies -->

    </dependencies>
  </dependencyManagement>

  <!-- Must-have dependencies -->
  <dependencies>
    <dependency>
      <groupId>org.projectlombok</groupId>
      <artifactId>lombok</artifactId>
      <scope>provided</scope>
    </dependency>

    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-devtools</artifactId>
      <optional>true</optional>
    </dependency>

    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-test</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.junit.jupiter</groupId>
      <artifactId>junit-jupiter-api</artifactId>
      <scope>test</scope>
    </dependency>
  </dependencies>

  <build>
    <pluginManagement>
      <plugins>
        <plugin>
          <artifactId>maven-compiler-plugin</artifactId>
          <configuration>
            <source>${java.version}</source>
            <target>${java.version}</target>
          </configuration>
        </plugin>
        <plugin>
          <artifactId>maven-deploy-plugin</artifactId>
          <configuration>
            <altDeploymentRepository>
              Repo.stage::default::file://${project.build.directory}/repo-stage
            </altDeploymentRepository>
          </configuration>
        </plugin>
        <plugin>
          <groupId>com.github.github</groupId>
          <artifactId>site-maven-plugin</artifactId>
          <version>${github.site-maven-plugin.version}</version>
          <configuration>
            <repositoryName>${github.repositoryName}</repositoryName>
            <repositoryOwner>${github.repositoryOwner}</repositoryOwner>
            <branch>refs/heads/${github.branch}</branch>
            <merge>true</merge>
            <message>Maven artifacts for ${project.artifactId}/${project.version}</message>
            <noJekyll>true</noJekyll>
            <outputDirectory>${project.build.directory}/repo-stage</outputDirectory>
            <includes>
              <include>**/*</include>
            </includes>
          </configuration>
          <executions>
            <execution>
              <goals>
                <goal>site</goal>
              </goals>
              <phase>deploy</phase>
            </execution>
          </executions>
        </plugin>
      </plugins>
    </pluginManagement>

    <!-- Must-have plugins -->
    <plugins>
      <plugin>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-maven-plugin</artifactId>
      </plugin>
      <plugin>
        <groupId>com.github.github</groupId>
        <artifactId>site-maven-plugin</artifactId>
      </plugin>
    </plugins>
  </build>

  <repositories>
    <repository>
      <id>ejw</id>
      <url>https://raw.githubusercontent.com/${github.repositoryOwner}/${github.repositoryName}/${github.branch}</url>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
    </repository>
  </repositories>

</project>